<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
	</head>
	<body>
		<!--<ul id="ul1">
		    <li>111</li>
		    <li>222</li>
		    <li>333</li>
		    <li>444</li>
		</ul>-->
		<!--<div id="box">
	        <input type="button" id="add" value="添加" />
	        <input type="button" id="remove" value="删除" />
	        <input type="button" id="move" value="移动" />
	        <input type="button" id="select" value="选择" />
	    </div>-->
	    <!--<input type="button" name="" id="btn" value="添加" />
	    <ul id="ul1">
	        <li>111</li>
	        <li>222</li>
	        <li>333</li>
	        <li>444</li>
	    </ul>-->
	    <ul id="test">
	        <li>
	            <p>11111111111</p>
	        </li>
	        <li>
	            <div>
	                22222222
	            </div>
	        </li>
	        <li>
	            <span>3333333333</span>
	        </li>
	        <li>4444444</li>
	    </ul>
		<script>
			/*window.onload = function(){
			    var oUl = document.getElementById("ul1");
			    var aLi = oUl.getElementsByTagName('li');
			    for(var i=0;i<aLi.length;i++){
			        aLi[i].onclick = function(){
			            alert(123);
			        }
			    }
			}*/
			//事件冒泡
			/*
			 * window.onload = function(){
			    var oUl = document.getElementById("ul1");
			   oUl.onclick = function(){
			        alert(123);
			    }
			}
			*/
			
			/*
			 * Event对象提供了一个属性叫target，可以返回事件的目标节点，我们成为事件源，
			 * 也就是说，target就可以表示为当前的事件操作的dom，但是不是真正操作dom，
			 * 当然，这个是有兼容性的，标准浏览器用ev.target，IE浏览器用event.srcElement，
			 * 此时只是获取了当前节点的位置，并不知道是什么节点名称，这里我们用nodeName来获取具体是什么标签名，
			 * 这个返回的是一个大写的，我们需要转成小写再做比较（习惯问题）
			 * 
			 * */
			
			/*window.onload=function(){
				var oUl = document.getElementById("ul1");
			   	oUl.onclick = function(ev){
			        var ev=ev || window.event;
		        　	var target = ev.target || ev.srcElement;
			        if(target.nodeName.toLowerCase() === "li"){
			        	alert(123);
　　　　　　　  				alert(target.innerHTML);
			        }
			    }
			}*/
			
			/*window.onload = function(){
	            var Add = document.getElementById("add");
	            var Remove = document.getElementById("remove");
	            var Move = document.getElementById("move");
	            var Select = document.getElementById("select");
	            
	            Add.onclick = function(){
	                alert('添加');
	            };
	            Remove.onclick = function(){
	                alert('删除');
	            };
	            Move.onclick = function(){
	                alert('移动');
	            };
	            Select.onclick = function(){
	                alert('选择');
	            }
	            
	        }*/
	       /*window.onload = function(){
		       	var oBox = document.getElementById("box");
	            oBox.onclick = function (ev) {
	                var ev = ev || window.event;
	                var target = ev.target || ev.srcElement;
	                if(target.nodeName.toLocaleLowerCase() === 'input'){
	                    switch(target.id){
	                        case 'add' :
	                            alert('添加');
	                            break;
	                        case 'remove' :
	                            alert('删除');
	                            break;
	                        case 'move' :
	                            alert('移动');
	                            break;
	                        case 'select' :
	                            alert('选择');
	                            break;
	                    }
	                }
	            }           
	       }*/
	      /**
	       * 新添加的li 没有点击事件
	       */
	      /*
	       window.onload = function(){
	            var oBtn = document.getElementById("btn");
	            var oUl = document.getElementById("ul1");
	            var aLi = oUl.getElementsByTagName('li');
	            var num = 4;
	            
	            //鼠标移入变红，移出变白
	            for(var i=0; i<aLi.length;i++){
	                aLi[i].onmouseover = function(){
	                    this.style.background = 'red';
	                };
	                aLi[i].onmouseout = function(){
	                    this.style.background = '#fff';
	                }
	            }           
	            //添加新节点
	            oBtn.onclick = function(){
	                num++;
	                var oLi = document.createElement('li');
	                oLi.innerHTML = 111*num;
	                oUl.appendChild(oLi);
	            };
       		 }
			*/
			//改良版
			/*window.onload = function(){
	            var oBtn = document.getElementById("btn");
	            var oUl = document.getElementById("ul1");
	            var aLi = oUl.getElementsByTagName('li');
	            var num = 4;
	            
	            function mHover () {
	                //鼠标移入变红，移出变白
	                for(var i=0; i<aLi.length;i++){
	                    aLi[i].onmouseover = function(){
	                        this.style.background = 'red';
	                    };
	                    aLi[i].onmouseout = function(){
	                        this.style.background = '#fff';
	                    }
	                }
	            }
	            mHover ();
	            //添加新节点
	            oBtn.onclick = function(){
	                num++;
	                var oLi = document.createElement('li');
	                oLi.innerHTML = 111*num;
	                oUl.appendChild(oLi);
	                mHover ();
	            };
        	}*/
        	
        	/*//精华版 事件委托
        	window.onload = function(){
	            var oBtn = document.getElementById("btn");
	            var oUl = document.getElementById("ul1");
	            var aLi = oUl.getElementsByTagName('li');
	            var num = 4;
            
	            //事件委托，添加的子元素也有事件
	            oUl.onmouseover = function(ev){
	                var ev = ev || window.event;
	                var target = ev.target || ev.srcElement;
	                if(target.nodeName.toLowerCase() == 'li'){
	                    target.style.background = "red";
	                }
	                
	            };
	            oUl.onmouseout = function(ev){
	                var ev = ev || window.event;
	                var target = ev.target || ev.srcElement;
	                if(target.nodeName.toLowerCase() == 'li'){
	                    target.style.background = "#fff";
	                }
	                
	            };
            
	            //添加新节点
	            oBtn.onclick = function(){
	                num++;
	                var oLi = document.createElement('li');
	                oLi.innerHTML = 111*num;
	                oUl.appendChild(oLi);
	            };
        	}*/
        	var oUl = document.getElementById('test');
		    oUl.addEventListener('click',function(ev){
		        var target = ev.target || window.event;
		        while(target !== oUl ){
		            if(target.tagName.toLowerCase() == 'li'){
		                console.log('li click~');
		                break;
		            }
		            debugger
		            target = target.parentNode;
		        }
		    })

			
		</script>
	</body>
</html>
